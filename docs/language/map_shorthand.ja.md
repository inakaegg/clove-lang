# マップ省略記法（JS 準拠）

## 目的
JS のオブジェクトリテラルに倣い、`{:a, :b}` のようにキーと同名の値を省略して書ける記法を追加しています。`clove fmt` / `pretty-print` も省略形のまま維持します。

## リテラルでの省略
- 基本形: `{:name, :age}` → `{:name name :age age}`
- ラベル風キー: `{name:, age:}` でも同様に展開される
- カンマは「空白扱い」なので、`{:name :alice, :age 30}` のような JS 風カンマ区切りがどこでも使える
- `:keys` / `:as` などの特別キーは省略の対象外（値を書いてください）

## デストラクチャリングでの省略
- `{name, age}` → `{:keys [name age]}` 相当として束縛される
- `{:keys [x y], :as whole}` のような従来構文と併用可能（途中にカンマを入れても動作）
- 特別キー `:keys` / `:as` 自体は省略できない（値が必要）
- 特別キーを「データとして」拾いたい場合は別名束縛を使う:  
  `(let [{keys-val :keys as-val :as} m] ...)`

## Formatter 振る舞い
- 省略エントリは `:a,` のようにカンマ付きで保持する
- `:keys` / `:as` は省略しない（常に値を出力する）

## 互換性メモ
- カンマがシンボル/キーワード名として解釈されなくなる（区切り扱い）ため、`,` を含む名前は書けない前提です。
- 既存コードで `{:keys, :as}` のように値を省略していた場合はエラーになります。明示的な値を書くか、別名束縛を利用してください。

---
<!-- NAV:START -->
**前へ:** [OOP メソッド新記法クイックリファレンス](oop_methods_quickref.ja.md)
**次へ:** [正規表現 / Duration リテラル](regex_duration.ja.md)
<!-- NAV:END -->

